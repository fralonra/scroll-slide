!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?module.exports=i():"function"==typeof define&&define.amd?define(i):(t=t||self).Scroll=i()}(this,(function(){"use strict";function t(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function i(t,i){for(var e=0;e<i.length;e++){var n=i[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function e(t,i,e){return i in t?Object.defineProperty(t,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[i]=e,t}function n(t,i){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);i&&(n=n.filter((function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),e.push.apply(e,n)}return e}function o(t){for(var i=1;i<arguments.length;i++){var o=null!=arguments[i]?arguments[i]:{};i%2?n(Object(o),!0).forEach((function(i){e(t,i,o[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):n(Object(o)).forEach((function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(o,i))}))}return t}var s={autoHeight:!0,duration:1e3,dotColor:"#e1e1e1",dotActiveColor:"#6687ff",idleTime:200,loop:!0,keyboard:!0,paginator:"none",slides:[],viewport:null,onScroll:null};function r(t,i,e){i>=t.length?t.push(e):t.splice(i,0,e)}function l(t,i){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=i.children;null===e||e===n.length?i.appendChild(t):i.insertBefore(t,n[e])}function a(t,i){t.style.transform="translateY(".concat(i,"px)")}return function(){function e(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t(this,e),this._initOption(i),this._initView(),this._initGlobalEvent()}var n,h,c;return n=e,(h=[{key:"add",value:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,e=this._option.slides;(i<0||i>e.length)&&(i=e.length),this._initSlide(t,i),r(this._option.slides,i,t),i<=this._currentSlide&&a(this._wrapper,-this._prevSlidesHeight(++this._currentSlide)),"none"!==this._option.paginator&&(this._addDot(i),i<=this._currentSlide&&this._changePaginator(this._currentSlide-1,this._currentSlide))}},{key:"current",value:function(){return this._currentSlide}},{key:"remove",value:function(t){t>=this._option.slides.length-1||(this._wrapper.removeChild(this._option.slides[t]),this._option.slides.splice(t,1),t===this._currentSlide&&t===this._option.slides.length-1?this.scrollTo(0):t<this._currentSlide&&this.scrollTo(this._currentSlide-1),"none"!==this._option.paginator&&(this._removeDot(t),t<=this._currentSlide&&this._changePaginator(this._currentSlide-1,this._currentSlide)))}},{key:"scrollDown",value:function(){var t=this._option.slides;if(!this._isLastSlide()||this._option.loop){var i=this._isLastSlide()?0:this._currentSlide+1,e=this._isSlideMutiPages(this._currentSlide),n=e?t[this._currentSlide].clientHeight-this._scrollInSlide>this._option.viewport.clientHeight?this._option.viewport.clientHeight:t[this._currentSlide].clientHeight-this._scrollInSlide:t[this._currentSlide].clientHeight,o=e&&this._scrollInSlide+n===t[this._currentSlide].clientHeight;a(this._wrapper,this._isLastSlide()&&!e||this._isLastSlide()&&o?0:this.top-n),!e||o?(this._changePaginator(this._currentSlide,i),this._setCurrentSlide(i),0!==this._scrollInSlide&&(this._scrollInSlide=0)):e&&(this._scrollInSlide+=n)}}},{key:"scrollTo",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=this._option.slides.length-1;t<0?t=i:t>i&&(t=0),a(this._wrapper,0===t?0:-this._prevSlidesHeight(t)),this._currentSlide!==t&&this._changePaginator(this._currentSlide,t),this._setCurrentSlide(t),0!==this._scrollInSlide&&(this._scrollInSlide=0)}},{key:"scrollUp",value:function(){if(!this._isFirstSlide()||this._option.loop){var t=this._option.slides,i=this._isFirstSlide()?t.length-1:this._currentSlide-1;a(this._wrapper,this._isFirstSlide()?t[t.length-1].clientHeight-this._wrapper.clientHeight:0===this._scrollInSlide?this.top+t[i].clientHeight:this.top+this._scrollInSlide),0===this._scrollInSlide?(this._changePaginator(this._currentSlide,i),this._setCurrentSlide(i)):this._scrollInSlide=0}}},{key:"toggleFull",value:function(t){"true"===t.getAttribute("data-full")?(t.removeAttribute("data-full"),t.style.height=""):(t.setAttribute("data-full","true"),t.style.height="".concat(this._option.viewport.clientHeight,"px"))}},{key:"_changePaginator",value:function(t,i){var e=this;"none"!==this._option.paginator&&this._dotList.forEach((function(n,o,s){i===o?(n.classList.add("".concat("scroll-slide","-paginator-dot-active")),n.style.backgroundColor=e._option.dotActiveColor):t===o&&(n.classList.remove("".concat("scroll-slide","-paginator-dot-active")),n.style.backgroundColor=e._option.dotColor)}))}},{key:"_addDot",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this._initDot(t),this._dotList.forEach((function(i,e,n){e>t&&i.setAttribute("slide-index",Number(i.getAttribute("slide-index"))+1)})),this._initPaginatorTop()}},{key:"_removeDot",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=this._dotList[t];this._paginator.removeChild(i),this._dotList.forEach((function(i,e,n){e>t&&i.setAttribute("slide-index",e-1)})),this._dotList.splice(t,1),this._initPaginatorTop()}},{key:"_initOption",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._currentSlide=0,this._dotList=null,this._isTouching=!1,this._lastAnimeTime=0,this._paginator=null,this._scrollInSlide=0,this._touchStartY=0,this._wrapper=null,this._option=o(o({},s),t),Array.isArray(this._option.slides)||(this._option.slides=Array.from(this._option.slides)),"none"!==this._option.paginator&&"left"!==this._option.paginator&&"right"!==this._option.paginator&&(this._option.paginator="none")}},{key:"_initDot",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=document.createElement("div");i.setAttribute("slide-index",t),i.classList.add("".concat("scroll-slide","-paginator-dot")),i.style.width="0.75rem",i.style.height="0.75rem",i.style.backgroundColor=this._option.dotColor,i.style.margin="0.5rem auto",i.style.borderRadius="50%",i.style.transition="all 0.5s ease 0s",i.style.cursor="pointer",t===this._currentSlide&&(i.classList.add("".concat("scroll-slide","-paginator-dot-active")),i.style.backgroundColor=this._option.dotActiveColor),r(this._dotList,t,i),l(i,this._paginator,t)}},{key:"_initDotList",value:function(){this._dotList=[];for(var t=0,i=this._option.slides.length;t<i;t++)this._initDot(t)}},{key:"_initFullHeight",value:function(t){t.style.height="".concat(this._option.viewport.clientHeight,"px")}},{key:"_initGlobalEvent",value:function(){var t=this;this._option.autoHeight&&window.addEventListener("resize",(function(i){t._handleResize(i),t._wrapper.style.transitionDuration="0s",t.scrollTo(t._currentSlide),setTimeout((function(){t._wrapper.style.transitionDuration="".concat(t._option.duration,"ms")}),1)})),this._option.keyboard&&document.addEventListener("keydown",(function(i){t._handleKeyboard(i)}))}},{key:"_initPaginator",value:function(){var t=this;this._paginator=document.createElement("div"),this._paginator.classList.add("".concat("scroll-slide","-paginator")),this._paginator.style.position="absolute",this._paginator.style[this._option.paginator]="".concat(.05*this._wrapper.clientWidth,"px"),this._paginator.addEventListener("click",(function(i){t._handleDotClick(i)})),this._initDotList(),this._option.viewport.appendChild(this._paginator),this._paginator.style.top="50%",this._initPaginatorTop()}},{key:"_initPaginatorTop",value:function(){this._paginator.style.marginTop="".concat(-this._paginator.clientHeight/2,"px")}},{key:"_initSlide",value:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t.classList.add("".concat("scroll-slide","-slide")),t.style.overflow="hidden","true"===t.getAttribute("data-full")&&this._initFullHeight(t),l(t,this._wrapper,i)}},{key:"_initSlides",value:function(){var t=this;this._option.slides.forEach((function(i){t._initSlide(i)}))}},{key:"_isFirstSlide",value:function(){return 0===this._currentSlide}},{key:"_isLastSlide",value:function(){return this._currentSlide===this._option.slides.length-1}},{key:"_isSlideOnTop",value:function(){return this.top===this._prevSlidesHeight()}},{key:"_isSlideMutiPages",value:function(t){return this._option.slides[t].clientHeight>this._option.viewport.clientHeight}},{key:"_initView",value:function(){var t=this,i=this._option.viewport||document.body;i.classList.add("".concat("scroll-slide","-viewport")),i.style.position="relative",""===i.style.height&&(i.style.height="100%"),i.style.overflow="hidden",i.addEventListener("wheel",(function(i){t._handleMouseWheel(i)})),i.addEventListener("touchstart",(function(i){t._handleTouchStart(i)})),this._wrapper=document.createElement("div"),this._wrapper.classList.add("".concat("scroll-slide","-wrapper")),this._wrapper.style.position="relative",this._wrapper.style.top="0px",this._wrapper.style.transition="all ".concat(this._option.duration,"ms ease 0s"),i.appendChild(this._wrapper),this._initSlides(),"none"!==this._option.paginator&&this._initPaginator()}},{key:"_prevSlidesHeight",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._currentSlide,i=0;return this._option.slides.forEach((function(e,n,o){t<=n||(i+=e.clientHeight)})),i}},{key:"_setCurrentSlide",value:function(t){t!==this._currentSlide&&(this._currentSlide=t,"function"==typeof this._option.onScroll&&this._option.onScroll(this._currentSlide))}},{key:"_handleDotClick",value:function(t){t.preventDefault();var i=Number(t.target.getAttribute("slide-index"))||0;i!==this._currentSlide&&this.scrollTo(i)}},{key:"_handleKeyboard",value:function(t){switch(t.key){case"ArrowDown":case"PageDown":this.scrollDown();break;case"ArrowUp":case"PageUp":this.scrollUp()}}},{key:"_handleMouseWheel",value:function(t){t.preventDefault();var i=(new Date).getTime();i-this._lastAnimeTime<this._option.idleTime+this._option.duration||((t.wheelDelta||-t.detail)<0?this.scrollDown():this.scrollUp(),this._lastAnimeTime=i)}},{key:"_handleResize",value:function(t){this._initSlides()}},{key:"_handleTouchMove",value:function(t){if(t.preventDefault(),this._isTouching){var i=(new Date).getTime();if(!(i-this._lastAnimeTime<this._option.idleTime+this._option.duration)){if(t.touches&&t.touches.length){var e=this._touchStartY-t.touches[0].pageY;if(Math.abs(e)<50)return;e<0?this.scrollDown():this.scrollUp(),t.target.removeEventListener("touchmove",this._handleTouchMove),this._lastAnimeTime=i}this._touchStartY=0,this._isTouching=!1}}}},{key:"_handleTouchStart",value:function(t){var i=this;t.touches&&t.touches.length&&(this._isTouching=!0,this._touchStartY=t.touches[0].pageY,this._option.viewport.addEventListener("touchmove",(function(t){i._handleTouchMove(t)})))}},{key:"top",get:function(){return this._wrapper&&this._wrapper.style.transform?parseFloat(this._wrapper.style.transform.split("translateY(")[1].split(")")[0]):0}}])&&i(n.prototype,h),c&&i(n,c),e}()}));
